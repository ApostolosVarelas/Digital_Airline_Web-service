
# Digital Airlines

Αυτή η εργασία αφορά τις λειτουργίες ενός website μίας αεροπορικής εταιρείας. 


## Υλοποίηση Containerization

Αρχικά, χρειάστηκα ένα Virtual Machine για να εξομοιώσω το λειτουργικό σύστημα Ubuntu, μέσα στο οποίο έφτιαξα το docker μέσα στο οποίο θα έτρεχε ο κώδικας για τις λειτουργίες της σελίδες. Για να φτιάξω το docker, έπρεπε να χρησιμοποιήσω μία πληθώρα εντολών, για να εγκαταστήσω αρχικά το docker στον υπολογιστή, να κατεβάσω το image για την Mongo και στην συνέχεια να φτιάξω το Dockerfile και το docker-compose, με λίγα λόγια να κάνουμε Containerization, έτσι ώστε  οι εφαρμογές να εκτελούνται σε απομονωμένο περιβάλλον χρήστη που ονομάζονται container.


## Κώδικας
Αφού το docker ήταν έτοιμο και λειτουργικό, ξεκίνησα την διαδικασία ανάπτυξης του κώδικα ο οποίος χωρίζεται σε 2 κομμάτια. Τις διαδικασίες που μπορεί να κάνει μόνο ο admin και τις διαδικασίες που μπορούν να κάνουν από κοινού. Συγκεκριμένα:

### Λειτουργίες User/Admin

-#### __Εγγραφή στο σύστημα__
Αυτή η λειτουργεία εκτελείται μέσω στην συνάρτησης def register(), η οποία εκτελείται όταν για URL δοθεί το __localhost:6000/register__ με μέθοδο POST, αφού επιχειρείται εγγραφή στην βάση δεδομένων. Στην συγκεκριμένη συνάρτηση, ο χρήστης πρέπει να εισάγει τα το όνομα του (το οποίο χρησιμοποιείται και ως username), το επώνυμο του, το email του, τον κωδικό που επιθυμεί να χρησιμοποιεί στο σύστημα, την ημερομηνία γέννησης του, την χώρα καταγωγής του καθώς και τον αριθμό διαβατηρίου του. Για να γίνει σωστή εισαγωγή στοιχείων, θα πρέπει να υπάρχει η παρακάτω εισαγωγή στοιχείων	

```json
{
  "firstname": "",
  "lastname": "",
  "email": "",
  "password": "",
  "date_of_birth": "",
  "country_of_origin": "",
  "passport_number": ""
}
```
Με την σωστή εισαγωγή των στοιχείων, ο χρήστης εγγράφεται επιτυχώς στο σύστημα. Διαφορετικά, εμφανίζεται μήνυμα λάθους. Επιπλέον, αν υπάρχει ήδη λογαριασμός με το ίδιο username και email, τότε εμφανίζει και πάλι μήνυμα λάθους. Με την επιτυχής σύνδεση του χρήστη, του δίνεται μαζί ένα μοναδικό _id το οποίο είναι URi, όπου i ένας αύξοντα αριθμός, και ένα type το οποίο απο default είναι πάντα 'User'.

-#### __Σύνδεση στο σύστημα__
Αυτή η λειτουργεία εκτελείται μέσω στην συνάρτησης def login(), η οποία εκτελείται όταν για URL δοθεί το __localhost:6000/login__ με μέθοδο POST. Όταν ο χρήστης επιθυμεί να κάνει σύνδεση στο σύστημα θα πρέπει να κάνει request στο στην παραπάνω δίευθυνση, δίνοντας σωστά στοιχεία email και password. Η σωστή μορφή είναι η παρακάτω:
```json
{
  "email": "",
  "password": ""
}
```
Με την σωστή σύνδεση του χρήστη, δημιουργείται ένα session στο οποίο αποθηκεύεται το _id του χρήστη, ώστε να μπορεί να έχει πρόσβαση στις λειτουργείες του, και το type του χρήστη, ώστε ένας απλός χρήστης να μην μπορεί να εκτελέσει τις λειτουργείες του admin. Αυτό ελέγχεται απο την μεταβλητή session, την type, η οποία δείχνει τον τύπο του χρήστη (User ή Admin). Μόνο με την επιτυχής σύνδεση του χρήστη μπορούν να υλοποιηθούν οι παρακάτω λειτουργείες, διαφορετικά το σύστημα προτρέπει τον χρήστη να κάνει σύνδεση. Αυτό ελέγχεται απο την μεταβλητή session, την _id, η οποία αν δεν είναι άδεια, τότε σημαίνει ότι ο χρήστης έχει κάνει επιτυχής σύνδεση.

#### __Έξοδος απο το σύστημα__
Όταν ο χρήστης επιθυμεί να κάνει έξοδο απο το σύστημα, το μόνο που έχει να κάνει είναι να παέι στο URL __localhost:6000/logout__ με μέθοδο POST. Μόλις ο χρήστης πατήσει αυτή την διεύθυνση, τότε αυτομάτως αποσυνδέεται απο το σύστημα. Αυτό γίνεται, διαγράφοντας τις τιμές του session στα πεδία _id και _type.

-#### __Αναζήτηση πτύσεων__
Όταν ο χρήστης επιθυμεί να κάνει έξοδο απο το σύστημα, το μόνο που έχει να κάνει είναι να παέι στο URL __localhost:6000/flight_search__ με μέθοδο GET, αφού το μόνο που χρειάζεται είνια να διαβάσει αρχεία απο την βάση δεδομένων. Εκεί, ο χρήστης έχει την επιλογή να ψάξει για πτύσεις με 4 διαφορετικούς τρόπους.
1. Βάση αεροδρόμιο προέλευσης και αεροδρόμιο τελικού προορισμού.
Σε αυτή την περίπτωση ο χρήστης θα πρέπει να κάνει το παρακάτω request:
```json
{
  "choice": 0,
  "origin": "",
  "destination": ""
}
```
Όπου "orinin" είναι το αεροδρόμιο προέλευσης και "destination" το αεροδρόμιο προορισμού.

2. Βάση αεροδρόμιο προέλευσης, αεροδρόμιο τελικού προορισμού και ημερομηνία
διεξαγωγής.
Σε αυτή την περίπτωση ο χρήστης θα πρέπει να κάνει το παρακάτω request:
```json
{
  "choice": 1,
  "origin": "",
  "destination": ""
  "date": ""
}
```
Όπου "orinin" είναι το αεροδρόμιο προέλευσης, "destination" το αεροδρόμιο προορισμού και "date" η ημερομηνία διεξαγωγής.

3. Βάση ημερομηνίας
Σε αυτή την περίπτωση ο χρήστης θα πρέπει να κάνει το παρακάτω request:
```json
{
  "choice": 2,
  "date": ""
}
```
Όπου "date" είνια η ημερομηνία διεξαγωγής.

4. Εμφάνιση όλων των διαθέσιμων πτήσεων.

Σε αυτή την περίπτωση ο χρήστης θα πρέπει να κάνει το παρακάτω request:
```json
{
  "choice": 3,
}
```
Όπου απλά εμφανίζονται όλες οι πτύσεις.

Σε Όλες τις παραπάνω περιπτώσεις ο χρήστης θα λαμβάνει πληροφορίες για τους μοναδικούς κωδικούς των πτύσεων, την ημερομηνία διεξαγωγής, το αεροδρόμιο προέλευσης και το αεροδρόμιο προορισμού, για τις διαθέσιμες πτήσεις σχετικά με τα φίλτα που έβαλαν.

Στην περίπτωση που δεν υπάρχουν διαθέσιμες πτήσεις, το σύστημα εμφανίζει στο χρήστη αυτή την πληροφορία.Σε περίπτωση λανθασμένης εισαγωγής στοιχείων, το σύστημα επιστρέφει μήνυμα λάθους.

Με την ορθή εισαγωγή στοιχείων, το σύστημα αρχικά ψάχνει νμα βρει όλες τις πτήσεις που ικανοποιούν τις προδιαγραφές του χρήστη, τις αποθηκεύει σε μία μεταβλητή flight, και σην συνέχεια εμφανίζει τα στοιχεία που αναφέρθηκαν πριν λίγο.

- Εμφάνιση στοιχείων πτήσης
